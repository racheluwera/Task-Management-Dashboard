<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - Task Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="py-8 px-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-indigo-700 mb-2">Task management dashboard</h1>
            <p class="text-lg text-gray-600">Manage your tasks efficiently and boost productivity</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Add Task & Stats -->
            <div class="lg:col-span-1 space-y-8">
                <!-- Add Task Form -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-plus-circle text-indigo-500 mr-2"></i> Add New Task
                    </h2>
                    <form id="taskForm" class="space-y-4">
                        <div>
                            <label for="taskName" class="block text-sm font-medium text-gray-700 mb-1">Task Name</label>
                            <input type="text" id="taskName" placeholder="Enter task name" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" required>
                            <p id="nameError" class="text-red-500 text-sm mt-1 hidden">Task name is required</p>
                        </div>
                        <div>
                            <label for="dueDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                            <input type="date" id="dueDate" 
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                        </div>
                        <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition flex items-center justify-center">
                            <i class="fas fa-plus mr-2"></i> Add Task
                        </button>
                    </form>
                </div>

                <!-- Stats Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-pie text-indigo-500 mr-2"></i> Task Statistics
                    </h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <p class="text-2xl font-bold text-blue-600" id="totalTasks">0</p>
                            <p class="text-sm text-gray-600">Total Tasks</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <p class="text-2xl font-bold text-green-600" id="completedTasks">0</p>
                            <p class="text-sm text-gray-600">Completed</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg text-center">
                            <p class="text-2xl font-bold text-yellow-600" id="pendingTasks">0</p>
                            <p class="text-sm text-gray-600">Pending</p>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg text-center">
                            <p class="text-2xl font-bold text-red-600" id="overdueTasks">0</p>
                            <p class="text-sm text-gray-600">Overdue</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-bolt text-indigo-500 mr-2"></i> Quick Actions
                    </h2>
                    <div class="space-y-3">
                        <button id="markAllComplete" class="w-full bg-green-100 text-green-700 py-2 rounded-lg font-medium hover:bg-green-200 transition flex items-center justify-center">
                            <i class="fas fa-check-circle mr-2"></i> Mark All Complete
                        </button>
                        <button id="clearCompleted" class="w-full bg-red-100 text-red-700 py-2 rounded-lg font-medium hover:bg-red-200 transition flex items-center justify-center">
                            <i class="fas fa-trash-alt mr-2"></i> Clear Completed
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Column - Task List & Controls -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Controls -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-tasks text-indigo-500 mr-2"></i> Your Tasks
                        </h2>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <div class="flex items-center">
                                <label for="filter" class="text-sm font-medium text-gray-700 mr-2">Filter:</label>
                                <select id="filter" class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                                    <option value="all">All Tasks</option>
                                    <option value="pending">Pending</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                            <div class="flex items-center">
                                <label for="sort" class="text-sm font-medium text-gray-700 mr-2">Sort by:</label>
                                <select id="sort" class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                                    <option value="default">Default</option>
                                    <option value="date">Due Date</option>
                                    <option value="name">Task Name</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Task List -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div id="taskList" class="space-y-4">
                        <!-- Tasks will be dynamically added here -->
                    </div>
                    <div id="emptyState" class="text-center py-10">
                        <i class="fas fa-clipboard-list text-5xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-medium text-gray-500">No tasks yet</h3>
                        <p class="text-gray-400 mt-2">Add a task using the form to get started</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-300 scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Edit Task</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="editForm" class="space-y-4">
                <input type="hidden" id="editId">
                <div>
                    <label for="editName" class="block text-sm font-medium text-gray-700 mb-1">Task Name</label>
                    <input type="text" id="editName" 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" required>
                </div>
                <div>
                    <label for="editDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                    <input type="date" id="editDate" 
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="cancelEdit" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Initialize tasks from localStorage or with sample data
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [
            { id: 1, name: 'Complete project proposal', dueDate: '2023-12-15', status: 'pending' },
            { id: 2, name: 'Prepare presentation slides', dueDate: '2023-12-10', status: 'pending' },
            { id: 3, name: 'Review team assignments', dueDate: '2023-12-05', status: 'completed' },
            { id: 4, name: 'Schedule client meeting', dueDate: '2023-12-12', status: 'pending' },
            { id: 5, name: 'Update project documentation', dueDate: '2023-12-20', status: 'pending' }
        ];

        // DOM Elements
        const taskForm = document.getElementById('taskForm');
        const taskList = document.getElementById('taskList');
        const emptyState = document.getElementById('emptyState');
        const editModal = document.getElementById('editModal');
        const editForm = document.getElementById('editForm');
        const filterSelect = document.getElementById('filter');
        const sortSelect = document.getElementById('sort');
        const markAllCompleteBtn = document.getElementById('markAllComplete');
        const clearCompletedBtn = document.getElementById('clearCompleted');

        // Stats elements
        const totalTasksEl = document.getElementById('totalTasks');
        const completedTasksEl = document.getElementById('completedTasks');
        const pendingTasksEl = document.getElementById('pendingTasks');
        const overdueTasksEl = document.getElementById('overdueTasks');

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderTasks();
            updateStats();
            
            // Set minimum date to today for due date inputs
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dueDate').min = today;
            document.getElementById('editDate').min = today;
        });

        // Add new task
        taskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const taskName = document.getElementById('taskName').value.trim();
            const dueDate = document.getElementById('dueDate').value;
            
            // Validation
            if (!taskName) {
                document.getElementById('nameError').classList.remove('hidden');
                return;
            } else {
                document.getElementById('nameError').classList.add('hidden');
            }
            
            const newTask = {
                id: Date.now(),
                name: taskName,
                dueDate: dueDate || null,
                status: 'pending'
            };
            
            tasks.push(newTask);
            saveTasks();
            renderTasks();
            updateStats();
            
            // Reset form
            taskForm.reset();
            
            // Show success animation
            const submitBtn = taskForm.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-check mr-2"></i> Task Added!';
            submitBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
            submitBtn.classList.add('bg-green-600', 'hover:bg-green-700');
            
            setTimeout(() => {
                submitBtn.innerHTML = '<i class="fas fa-plus mr-2"></i> Add Task';
                submitBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                submitBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
            }, 2000);
        });

        // Render tasks based on current filter and sort
        function renderTasks() {
            const filter = filterSelect.value;
            const sort = sortSelect.value;
            
            // Filter tasks
            let filteredTasks = [...tasks];
            if (filter === 'pending') {
                filteredTasks = filteredTasks.filter(task => task.status === 'pending');
            } else if (filter === 'completed') {
                filteredTasks = filteredTasks.filter(task => task.status === 'completed');
            }
            
            // Sort tasks
            if (sort === 'date') {
                filteredTasks.sort((a, b) => {
                    if (!a.dueDate) return 1;
                    if (!b.dueDate) return -1;
                    return new Date(a.dueDate) - new Date(b.dueDate);
                });
            } else if (sort === 'name') {
                filteredTasks.sort((a, b) => a.name.localeCompare(b.name));
            }
            
            // Clear task list
            taskList.innerHTML = '';
            
            // Show empty state if no tasks
            if (filteredTasks.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            } else {
                emptyState.classList.add('hidden');
            }
            
            // Render each task
            filteredTasks.forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = `task-item bg-white border border-gray-200 rounded-xl p-4 fade-in ${task.status === 'completed' ? 'completed bg-green-50' : ''}`;
                taskItem.setAttribute('data-id', task.id);
                
                const isOverdue = task.dueDate && new Date(task.dueDate) < new Date() && task.status !== 'completed';
                
                taskItem.innerHTML = `
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-3 flex-1">
                            <button class="toggle-status mt-1 ${task.status === 'completed' ? 'text-green-600' : 'text-gray-400'}">
                                <i class="fas fa-${task.status === 'completed' ? 'check-circle' : 'circle'} text-lg"></i>
                            </button>
                            <div class="flex-1">
                                <h3 class="font-medium ${task.status === 'completed' ? 'text-gray-500' : 'text-gray-800'}">${task.name}</h3>
                                ${task.dueDate ? `
                                    <div class="flex items-center mt-1 ${isOverdue ? 'text-red-500' : 'text-gray-500'}">
                                        <i class="far fa-calendar-alt mr-1 text-sm"></i>
                                        <span class="text-sm">${formatDate(task.dueDate)}</span>
                                        ${isOverdue ? '<span class="ml-2 bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded">Overdue</span>' : ''}
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-2">
                            <button class="edit-task text-blue-500 hover:text-blue-700 transition">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-task text-red-500 hover:text-red-700 transition">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                taskList.appendChild(taskItem);
                
                // Add event listeners for task actions
                const toggleBtn = taskItem.querySelector('.toggle-status');
                const editBtn = taskItem.querySelector('.edit-task');
                const deleteBtn = taskItem.querySelector('.delete-task');
                
                toggleBtn.addEventListener('click', () => toggleTaskStatus(task.id));
                editBtn.addEventListener('click', () => openEditModal(task.id));
                deleteBtn.addEventListener('click', () => deleteTask(task.id));
            });
        }

        // Toggle task status between pending and completed
        function toggleTaskStatus(id) {
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex].status = tasks[taskIndex].status === 'completed' ? 'pending' : 'completed';
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        // Open edit modal with task data
        function openEditModal(id) {
            const task = tasks.find(task => task.id === id);
            if (task) {
                document.getElementById('editId').value = task.id;
                document.getElementById('editName').value = task.name;
                document.getElementById('editDate').value = task.dueDate || '';
                
                editModal.classList.remove('hidden');
                setTimeout(() => {
                    editModal.querySelector('.transform').classList.remove('scale-95');
                    editModal.querySelector('.transform').classList.add('scale-100');
                }, 10);
            }
        }

        // Close edit modal
        function closeEditModal() {
            editModal.querySelector('.transform').classList.remove('scale-100');
            editModal.querySelector('.transform').classList.add('scale-95');
            setTimeout(() => {
                editModal.classList.add('hidden');
            }, 300);
        }

        // Save edited task
        editForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('editId').value);
            const name = document.getElementById('editName').value.trim();
            const dueDate = document.getElementById('editDate').value;
            
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex].name = name;
                tasks[taskIndex].dueDate = dueDate || null;
                
                saveTasks();
                renderTasks();
                updateStats();
                closeEditModal();
            }
        });

        // Delete task with confirmation
        function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                const taskElement = document.querySelector(`.task-item[data-id="${id}"]`);
                if (taskElement) {
                    taskElement.classList.add('slide-out');
                    setTimeout(() => {
                        tasks = tasks.filter(task => task.id !== id);
                        saveTasks();
                        renderTasks();
                        updateStats();
                    }, 300);
                }
            }
        }

        // Update status
        function updateStatus() {
            const total = tasks.length;
            const completed = tasks.filter(task => task.status === 'completed').length;
            const pending = tasks.filter(task => task.status === 'pending').length;
            const overdue = tasks.filter(task => 
                task.dueDate && new Date(task.dueDate) < new Date() && task.status !== 'completed'
            ).length;
            
            totalTasksEl.textContent = total;
            completedTasksEl.textContent = completed;
            pendingTasksEl.textContent = pending;
            overdueTasksEl.textContent = overdue;
        }

        // Save tasks to localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Format date for display
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Event listeners for filters and sorting
        filterSelect.addEventListener('change', renderTasks);
        sortSelect.addEventListener('change', renderTasks);

        // Event listeners for modal
        document.getElementById('closeModal').addEventListener('click', closeEditModal);
        document.getElementById('cancelEdit').addEventListener('click', closeEditModal);

        // Event listeners for quick actions
        markAllCompleteBtn.addEventListener('click', function() {
            tasks.forEach(task => {
                task.status = 'completed';
            });
            saveTasks();
            renderTasks();
            updateStats();
        });

        clearCompletedBtn.addEventListener('click', function() {
            if (confirm('Are you sure you want to delete all completed tasks?')) {
                tasks = tasks.filter(task => task.status !== 'completed');
                saveTasks();
                renderTasks();
                updateStats();
            }
        });
    </script>
</body>
</html>